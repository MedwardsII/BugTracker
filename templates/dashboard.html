{% extends "base.html" %}
{% load ticket_filter %}
{% block content %}

<style>
  .flexrow { display: flex;
             border: 2px black;
  }
  .flexrow > div { flex: 1; }
  .infocell {
    border: 2px solid green;
    border-radius: 5px 25px;
    background-color: white;
    padding: 5px;
    margin: 20px 5px 5px 5px;
  }
</style>
<div class="mt-3 mb-3 ms-4 align-items-center">
    <h1 class="fw-bold">{{ page_name }}</h1>
</div>
<div class="flexrow">
  <div class="infocell">
    <h2>Tickets</h2>
    <div class="mb-3">
        <span class="text-info">Total Tickets: </span> <span><a href="{% url 'tickets:list_all' %}">{{ tickets|length }}</a></span><br>
        <span class="text-info">Total Tickets Pending: </span> 
        {% if tickets|complete_ticket_diff < 50 %}
        <span><a href="{% url 'tickets:list_pending' %}" class="text-danger">{{ tickets|tickets_not_complete }}</a></span><br>
        {% else %}
        <span><a href="{% url 'tickets:list_pending' %}">{{ tickets|tickets_not_complete }}</a></span><br>
        {% endif %}
        <span class="text-info">Total Tickets Pending Assignment: </span> <span><a href="{% url 'tickets:list_need_assignment' %}">{{ tickets|tickets_pending_assignment }}</a></span><br>
        <span class="text-info">Tickets Assigned To You ({{ user.username }}): </span>
        {% if tickets|tickets_assigned:user %}
        <span><a href="{% url 'tickets:list_assigned' %}">{{ tickets|tickets_assigned:user }}</a></span><br>
        {% else %}
        <span>0</span><br>
        {% endif %}
    </div>
  </div>
  <div class="infocell pb-3">
    <h2>Viewed Tickets</h2>
    {% for ticket_pk, ticket_title in request.session.viewed_tickets %}
    <a href="/tickets/{{ ticket_pk }}"><em>Ticket #{{ ticket_pk }}</em></a><br>
    {% empty %}
      No recently viewed tickets found.
    {% endfor %}
  </div>
</div>
<div>
  
</div>
{% endblock %}