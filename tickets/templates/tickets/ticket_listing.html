{% extends 'base.html' %}
{% load ticket_filter %}
{% block content %}
<div class="mt-3 mb-3 ms-4 align-items-center">
    <div class="fw-bold fs-2 text-decoration-underline">Viewing: <em>{{ request.path|page_name }} Tickets</em></div>
    <div class="fs-5 mt-2">
        <a role="link" href="{% url 'tickets:create_ticket' %}" ><em>Create a new ticket!</em></a>
    </div>
</div>
{% if tickets %}
<table class="table table-hover table-responsive-sm">
    <thead>
        <tr>
            <th class="text-center">Ticket ID</th>
            <!-- <th class="text-center">Title</th> -->
            <th class="text-center">Request</th>
            <th class="text-center">Priority</th>
            <th class="text-center">Created</th>
            <th class="text-center">Last Modified</th>
            <th></th>
        </tr>
    </thead>
    {% for ticket in tickets|dictsortreversed:"created_on" %}
    <tbody>
        <tr>
            <td class="text-center">{{ ticket.id }}</td>
            <!-- <td class="text-center">{{ ticket.title }}</td> -->
            <td class="text-center">{{ ticket.request_type }}</td>
            <td class="text-center">{{ ticket.priority }}</td>
            <!--Add number of comments to view-->
            <div class="ticket-dates d-sm-none">
                <td class="text-center">{{ ticket.created_on }}</td>
                <td class="text-center">{{ ticket.last_updated }}</td>
            </div>
            <td><a class="btn btn-outline-info btn-sm" role="button" href="{% url 'tickets:details' ticket.pk %}" >Details</a></td>
        </tr>
    </tbody>
    {% endfor %}
    {% else %}
    <div class="container-fluid mb-3 ms-2">
        <div class="mt-3">
            <h5 class="text-decoration-underline">No tickets in queue!</h5>
        </div>
    </div>
    {% endif %}
</table>
{% endblock %}